{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="jumbotron">
<h1>What the hell is this?</h1>

<p class="lead"> Welcome to <a
href="https://mutaplasmid.space/">mutaplasmid.space</a>! This is a
community-built website to facilitate the trading of abyssal modules in EVE
Online. With the current contract system, it's hard to find and buy the right
modules for your spaceship. This service aims to provide you with tools to
efficiently search for the abyssal modules you want. </p>

<p>This service aims to gather information on abyssal modules in multiple
ways. First, we want to collect contracts for abyssal modules since this is the
easiest way to trade them; the seller decides the price in advance and and
buyer only needs to accept. Unfortunately, ESI currently does not allow
developers to scrape public contracts. It also does not allow developers to
look up the stats of abyssal mods traded in private contracts. Until these
issues are fixed by CCP, we can't help you by making abyssal contracts easier
to use. </p>

<p>What we <em>can</em> do is scrape your assets for abyssal modules and
display them on this website. That is what <a
href="https://mutaplasmid.space/">mutaplasmid.space</a> is currently designed
to do. You log in with your EVE account (securely via CCP) and we gather up all
the abyssal mods you have in your hangars. Then we display them and allow
people to contact you to buy them. Pretty easy!</p>

<p>One downside of the asset-based approach is that you need to grant us read
access to <em>all</em> your assets. We promise that we don't save data on any
non-abyssal assets you have, but we understand that you don't trust us. Perhaps
it would be a good compromise to create a new dedicated alt with the sole
purpose of holding your abyssal mods. Of course, this is only feasible for real
<em>Big Abyssal</em>.</p>

</div>


<div class="jumbotron">
    <h1>Latest Abyssal Modules</h1>

    <table class="table module-table" id="module-table">
        <thead>
            <tr>
                <th>Icon</th>
                <th>ID</th>
                <th>Module</th>
                <th>Attributes</th>
                <th>Creator</th>
            </tr>
        </thead>
        <tbody>
            {% for m in modules %}
            <tr class="item">
                <td><img src="https://image.eveonline.com/Type/{{ m.type.id }}_32.png"></td>
                <td>{{ m.id}}</td>
                <td><a href="{% url 'abyssal_modules:type_module_list' m.type.id %}">{{ m.type.name }}</a></td>
                <td>
                    <div class="row">
                        {% for a in m.attribute_list %}
                        <div class="col-4">
                            <img src="{% static a.attribute.icon_path %}" title="{{ a.attribute.name }}">
                            {{ a.real_value|floatformat }} {{ a.attribute.unit_str }}
                        </div>
                        {% endfor %}
                    </div>
                </td>
                <td>{{ m.creator.name }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block trailing_js %}
<script>
    $(document).ready(function () {
        $('#module-table').DataTable({
            "columnDefs": [
                { "orderable": false, "targets": 0 },
                { "orderable": false, "targets": 3 },
            ],
            "order": [[1, "asc"]]
        });
    });
</script>
{% endblock %}
