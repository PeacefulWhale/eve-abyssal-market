{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% block content %}
<div class="jumbotron">
<h1>What the hell is this?</h1>

<p class="lead"> Welcome to <a
href="https://mutaplasmid.space/">mutaplasmid.space</a>! This is a
community-built website to facilitate the trading of abyssal modules in EVE
Online. With the current contract system, it's hard to find and buy the right
modules for your spaceship. This service aims to provide you with tools to
efficiently search for the abyssal modules you want. </p>

</div>


<div class="jumbotron">
    <h1>Latest Abyssal Modules</h1>

    <table class="table module-table" id="module-table">
        <thead>
            <tr>
                <th width="1px">Icon</th>
                <th>Module</th>
                <th>Attributes</th>
                <th width="100px">Price</th>
                <th width="1px">Open</th>
            </tr>
        </thead>
        <tbody>
            {% for m in modules %}
            <tr class="item">
                <td><a href="{% url 'abyssal_modules:module_view' m.id %}"><img src="https://image.eveonline.com/Type/{{ m.type.id }}_32.png"></a></td>
                <td><a href="{% url 'abyssal_modules:type_module_list' m.type.id %}">{{ m.type.name }}</a></td>
                <td>
                    <div class="row">
                        {% for a in m.attribute_list %}
                        <div class="col-4">
                            <img src="{% static a.attribute.icon_path %}" title="{{ a.attribute.name }}">
                            {{ a.real_value|floatformat }} {{ a.attribute.unit_str }}
                        </div>
                        {% endfor %}
                    </div>
                </td>
                <td>{{ m.contract_price|intword }} ISK</td>
                <td class="contract-button-container">
                    <a
                        class="btn btn-primary btn-open-contract {% if not request.user.is_authenticated %}disabled{% endif %}"
                        href="javascript:open_contract({{ m.contract_id }})"
                        role="button"
                    >
                        API
                    </a>&nbsp;
                    <button
                        class="btn btn-primary btn-copy-contract-link btn-open-contract"
                        data-clipboard-text="<url=contract:30000142//{{ m.contract_id }}>Contract {{ m.contract_id }}</url>"
                    >
                        Link
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block trailing_js %}
<script>
$(document).ready(function () {
    $('#module-table').DataTable({
        "columnDefs": [
            { "orderable": false, "targets": 0 },
            { "orderable": false, "targets": 2 },
            { "orderable": false, "targets": 4 },
        ],
        "order": []
    });
});
</script>
{% endblock %}
